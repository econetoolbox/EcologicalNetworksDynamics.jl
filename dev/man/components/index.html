<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>The Model and its Components · EcologicalNetworksDynamics.jl</title><meta name="title" content="The Model and its Components · EcologicalNetworksDynamics.jl"/><meta property="og:title" content="The Model and its Components · EcologicalNetworksDynamics.jl"/><meta property="twitter:title" content="The Model and its Components · EcologicalNetworksDynamics.jl"/><meta name="description" content="Documentation for EcologicalNetworksDynamics.jl."/><meta property="og:description" content="Documentation for EcologicalNetworksDynamics.jl."/><meta property="twitter:description" content="Documentation for EcologicalNetworksDynamics.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="EcologicalNetworksDynamics.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="EcologicalNetworksDynamics.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EcologicalNetworksDynamics.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome</a></li><li><span class="tocitem">Guide</span><ul><li><a class="tocitem" href="../quickstart/">Quick Start</a></li><li class="is-active"><a class="tocitem" href>The Model and its Components</a><ul class="internal"><li><a class="tocitem" href="#Model-Properties"><span>Model Properties</span></a></li><li><a class="tocitem" href="#Model-Components"><span>Model Components</span></a></li><li><a class="tocitem" href="#Model-Constraints"><span>Model Constraints</span></a></li><li><a class="tocitem" href="#Bringing-Blueprints"><span>Bringing Blueprints</span></a></li><li class="toplevel"><a class="tocitem" href="#Using-the-Default-Model"><span>Using the Default Model</span></a></li><li><a class="tocitem" href="#/!\\-Find-fresh-example-snippets-/!\\"><span>/!\ Find fresh example snippets /!\</span></a></li></ul></li><li><a class="tocitem" href="../foodwebs/">Generate Food Webs</a></li><li><a class="tocitem" href="../simple-models/">Build Simple Models</a></li><li><a class="tocitem" href="../advanced-models/">Build Advanced Models</a></li><li><a class="tocitem" href="../simulate/">Simulate the Community Dynamics</a></li><li><a class="tocitem" href="../output-analysis/">Analyse the Simulated Dynamics</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../lib/public/">Public</a></li><li><a class="tocitem" href="../../lib/internals/">Internals</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Guide</a></li><li class="is-active"><a href>The Model and its Components</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>The Model and its Components</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/econetoolbox/EcologicalNetworksDynamics.jl/blob/main/docs/src/man/components.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="The-Ecological-Model-and-Components"><a class="docs-heading-anchor" href="#The-Ecological-Model-and-Components">The Ecological Model and Components</a><a id="The-Ecological-Model-and-Components-1"></a><a class="docs-heading-anchor-permalink" href="#The-Ecological-Model-and-Components" title="Permalink"></a></h1><p>The package <code>EcologicalNetworksDynamics</code> represents an ecological network as a julia value of type <a href="../../lib/public/#EcologicalNetworksDynamics.Model"><code>Model</code></a>.</p><pre><code class="language-julia hljs">m = default_model(Foodweb([:a =&gt; :b, :b =&gt; :c]))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 17 components:
  - Species: 3 (:a, :b, :c)
  - Foodweb: 2 links, 1 producer, 2 consumers, 2 preys, 1 top.
  - BodyMass: [100.0, 10.0, 1.0]
  - Metabolic classes: [:invertebrate, :invertebrate, :producer]
  - Growth rate: [·, ·, 1.0]
  - Carrying capacity: [·, ·, 1.0]
  - Producers competition: 1.0
  - &lt;LogisticGrowth&gt;
  - Efficiency: 0.45 to 0.85
  - Maximum consumption: [8.0, 8.0, ·]
  - Hill Exponent: 2.0
  - Consumer preferences: 1.0
  - Intra-specific interference: [·, ·, ·]
  - Half-saturation density: [0.5, 0.5, ·]
  - &lt;BioenergeticResponse&gt;
  - Metabolism: [0.09929551852928711, 0.1765751761097696, 0.0]
  - Mortality: [0.0, 0.0, 0.0]</code></pre><p>Values of this type essentially describe a <em>graph</em>, with various <em>nodes</em> compartments representing <em>e.g.</em> species or nutrients and various <em>edges</em> compartments representing <em>e.g.</em> trophic links, or facilitation links. In addition to the network topology, the model also holds <em>data</em> describing the model further, and brought by the various models <em>components</em>. There are three possible &quot;levels&quot; for this data:</p><ul><li><strong>Graph-level</strong> data describe properties of the whole system. <em>e.g.</em>  temperature, hill-exponent <em>etc.</em> These are typically <em>scalar</em> values.</li><li><strong>Node-level</strong> data describe properties of particular nodes in the graph: <em>e.g.</em> species body mass, nutrients turnover <em>etc.</em> These are typically <em>vector</em> values.</li><li><strong>Edge-level</strong> data describe properties of particular links: <em>e.g.</em> trophic links efficiency, half-saturation of a producer-to-nutrient links <em>etc.</em> These are typically <em>matrix</em> values.</li></ul><h2 id="Model-Properties"><a class="docs-heading-anchor" href="#Model-Properties">Model Properties</a><a id="Model-Properties-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Properties" title="Permalink"></a></h2><p>The data held by the model can be accessed via the various model <em>properties</em>, accessed with julia&#39;s <code>m.&lt;P&gt;</code> property accessor:</p><pre><code class="language-julia hljs">m.hill_exponent # Graph-level data (a number).
m.body_mass     # Node-level data (a vector with one value per species).
m.efficiency    # Edge-level data (a matrix with one value per species interaction).</code></pre><p>Properties are grouped into <em>property spaces</em>:</p><pre><code class="language-julia hljs">m.species</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Property space for &#39;&lt;internals&gt;&#39;: <span class="sgr30"><span class="sgr1">.species</span></span></code></pre><p>You can navigate the property spaces with successive <code>.</code> accesses:</p><pre><code class="language-julia hljs">m.species.number</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3</code></pre><pre><code class="language-julia hljs">m.trophic.matrix</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3×3 EcologicalNetworksDynamics.TrophicMatrix:
 0  1  0
 0  0  1
 0  0  0</code></pre><p>Some data can be modified this way with <code>m.&lt;P&gt; = &lt;value&gt;</code>. But <em>not all</em>:</p><pre><code class="language-julia hljs"># Okay: this is terminal data.
m.hill_exponent = 2.1

# Not okay: this could make the rest of the model data inconsistent.
m.species.richness = 4</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr31">ERROR:</span> In property `species.richness` of &#39;&lt;internals&gt;&#39;: This property is read-only.</code></pre><p>If you need a model with different values for read-only data, you need to build a new model with the values you desire.</p><pre><code class="language-julia hljs">m = default_model(Foodweb([:a =&gt; :b, :b =&gt; [:c, :d]])) # Re-construct with a 4th species.
m.species.richness # Now the value is what you want.</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4</code></pre><p>The full list of available model properties can be queried with:</p><pre><code class="language-julia hljs">properties(m)</code></pre><p>Some properties are just convenience aliases for each other.</p><pre><code class="language-julia hljs">m.A == m.trophic.matrix</code></pre><h2 id="Model-Components"><a class="docs-heading-anchor" href="#Model-Components">Model Components</a><a id="Model-Components-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Components" title="Permalink"></a></h2><p>The <a href="../../lib/public/#EcologicalNetworksDynamics.Model"><code>Model</code></a> value is very flexible and can represent a variety of different networks. It is made from the combination of various <em>components</em>.</p><h3 id="Empty-Model-and-the-add!-Method"><a class="docs-heading-anchor" href="#Empty-Model-and-the-add!-Method">Empty Model and the <code>add!</code> Method</a><a id="Empty-Model-and-the-add!-Method-1"></a><a class="docs-heading-anchor-permalink" href="#Empty-Model-and-the-add!-Method" title="Permalink"></a></h3><p>When you start from a <a href="../../lib/public/#EcologicalNetworksDynamics.default_model-Tuple{Vararg{Union{EcologicalNetworksDynamics.Framework.Blueprint{&lt;internals&gt;}, EcologicalNetworksDynamics.Framework.BlueprintSum{&lt;internals&gt;}}}}"><code>default_model</code></a>, you typically obtain a full-fledged value, with all the components required to simulate the dynamics. Alternately, you can start from an empty model:</p><pre><code class="language-julia hljs">m = Model()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 0 component.</code></pre><p>In this situation, you need to add the components one by one. But this gives you full control over the model content.</p><p>An empty model cannot be simulated, because the data required for simulation is missing from it.</p><pre><code class="language-julia hljs">simulate(m, 0.5, 100)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr31">ERROR:</span> In method &#39;_simulate&#39; for &#39;&lt;internals&gt;&#39;: Requires a component &lt;FunctionalResponse&gt;.</code></pre><p>Also, an empty model cannot be queried for data, because there is no data inside:</p><pre><code class="language-julia hljs">m.richness</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr31">ERROR:</span> In property `.richness` of &#39;&lt;internals&gt;&#39;: Component &lt;Species&gt; is required to read this property.</code></pre><p>The most basic way to add a <a href="@ref"><code>Species</code></a> component to your model is to use the <a href="@ref"><code>add!</code></a> function:</p><pre><code class="language-julia hljs">add!(m, Species(3))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 1 component:
  - Species: 3 (:s1, :s2, :s3)</code></pre><p>Now that the <a href="@ref"><code>Species</code></a> component has been added, the related properties can be queried from the model:</p><pre><code class="language-julia hljs">m.species.richness</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3</code></pre><pre><code class="language-julia hljs">m.species.names</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3-element EcologicalNetworksDynamics.SpeciesNames:
 :s1
 :s2
 :s3</code></pre><p>But the other properties cannot be queried, because the associated components are still missing:</p><pre><code class="language-julia hljs">m.trophic.matrix</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr31">ERROR:</span> In property `trophic.matrix` of &#39;&lt;internals&gt;&#39;: Component &lt;Foodweb&gt; is required to read this property.</code></pre><p>Before we add the missing <a href="@ref"><code>Foodweb</code></a> component, let us explain that the component addition we did above actually happened in <em>two stages</em>.</p><h3 id="Blueprints-Expand-into-Components"><a class="docs-heading-anchor" href="#Blueprints-Expand-into-Components">Blueprints Expand into Components</a><a id="Blueprints-Expand-into-Components-1"></a><a class="docs-heading-anchor-permalink" href="#Blueprints-Expand-into-Components" title="Permalink"></a></h3><p>To add a component to a model, we first need to create a <em>blueprint</em> for the component. A blueprint is a julia value containing all the data needed to <em>expand</em> into a component.</p><pre><code class="language-julia hljs">sp = Species([:hen, :fox, :snake]) # This is a blueprint, useful to later expand into a model component.</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">blueprint for <span class="sgr33">&lt;Species&gt;</span>: <span class="sgr34">Names</span> {
  <span class="sgr36">names:</span> [:hen, :fox, :snake],
}</code></pre><p>When you call the <a href="@ref"><code>add!</code></a> function, you feed it with a model and a blueprint. The blueprint is read and expanded within the given model:</p><pre><code class="language-julia hljs">m = Model() # Empty model.
add!(m, sp) # Expand blueprint `sp` into a `Species` component within `m`.
m           # The result is a model with 1 component inside.</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 1 component:
  - Species: 3 (:hen, :fox, :snake)</code></pre><p>As we have seen before: once it has been expanded into the model, you cannot always edit the component data directly. For instance, the following does not work:</p><pre><code class="language-julia hljs">m.species.names[2] = &quot;rhino&quot;</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr31">ERROR:</span> View error (EcologicalNetworksDynamics.SpeciesNames): This view into graph nodes data is read-only.</code></pre><p>However, you can always edit the <em>blueprint</em>, then re-expand it later into other models.</p><pre><code class="language-julia hljs">sp.names[2] = :rhino    # Edit one species name within the blueprint.
push!(sp.names, :ficus) # Append a new species to the blueprint.
m2 = Model(sp)          # Create a new model from the modified blueprint.
m2                      # This new model contains the alternate data.</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 1 component:
  - Species: 4 (:hen, :rhino, :snake, :ficus)</code></pre><p>Blueprints can get sophisticated. For instance, here are various ways to create blueprints for a <a href="@ref"><code>Foodweb</code></a> component.</p><pre><code class="language-julia hljs">fw = Foodweb(:niche, S = 5, C = 0.2)         # From a random model.
fw = Foodweb([0 1 0; 1 0 1; 0 0 0])          # From an adjacency matrix.
fw = Foodweb([:fox =&gt; :hen, :hen =&gt; :snake]) # From an adjacency list.</code></pre><p>So, although the value <code>Foodweb</code> represents a component, you can <em>call</em> it to produce blueprints expanding into this component. In Julia linguo: <code>Foodweb</code> is a singleton functor value that forwards its calls to actual blueprint constructors.</p><p>Instead of calling the <code>Foodweb</code> component as a functor, you can be more explicit by calling the blueprint constructors directly:</p><pre><code class="language-julia hljs">fw = Foodweb.Matrix([0 1 0; 1 0 1; 0 0 0])
fw = Foodweb.Adjacency([:fox =&gt; :hen, :hen =&gt; :snake])</code></pre><p>Here, <code>Foodweb.Matrix</code> and <code>Foodweb.Adjacency</code> are two different types of blueprints providing the component <code>Foodweb</code>. The call to <code>Fooweb(:niche, ...)</code> yields a random <code>Foodweb.Matrix</code> blueprint.</p><p>If you want to test the component, but you don&#39;t want to loose the original model, you can keep a safe <a href="@ref"><code>copy</code></a> of it before you actually expand the blueprint:</p><pre><code class="language-julia hljs">base = copy(m) # Keep a safe, basic, incomplete version of the model.
add!(m, fw)    # Expand the foodweb into a new component within `m`: `base` remains unchanged.</code></pre><p>A shorter way to do so is to directly use julia&#39;s <code>+</code> operator, which always leaves the original model unchanged and creates an augmented copy of it:</p><pre><code class="language-julia hljs">m = base + fw # Create a new model `m` with a Foodweb inside, leaving model `base` unchanged.</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 2 components:
  - Species: 3 (:hen, :fox, :snake)
  - Foodweb: 2 links, 1 producer, 2 consumers, 2 preys, 1 top.</code></pre><p>Separating blueprints creation from final components expansion gives you flexibility when creating your models. Blueprints can either be thrown after use, or kept around to be modified and reused without limits.</p><h2 id="Model-Constraints"><a class="docs-heading-anchor" href="#Model-Constraints">Model Constraints</a><a id="Model-Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Model-Constraints" title="Permalink"></a></h2><p>Of course, you cannot expand blueprints into components that would yield inconsistent models:</p><pre><code class="language-julia hljs">base = Model(Species(3)) # A model a with 3-species compartment.
m = base + Foodweb([0 1; 0 0]) # An adjacency matrix with only 2×2 values.</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr31">ERROR:</span> Blueprint cannot expand against current system value:
  <span class="sgr3">Invalid size for parameter &#39;A&#39;: expected (3, 3), got (2, 2).</span>
Not all blueprints have been expanded.
This means that the system consistency is still guaranteed, but some components have not been added.
<span class="sgr90">in</span> <span class="sgr34">Foodweb_.Matrix</span></code></pre><p>Components cannot be <em>removed</em> from a model, because it could lead to inconsistent model values. Components cannot either be <em>duplicated</em> or <em>replaced</em> within a model:</p><pre><code class="language-julia hljs">m = Model(Foodweb(:niche, S = 5, C = 0.2))
m += Foodweb([:a =&gt; :b]) # Nope: already added.</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr31">ERROR:</span> Blueprint would expand into component <span class="sgr33">&lt;Foodweb&gt;</span>, which is already in the system.
<span class="sgr90">in</span> <span class="sgr34">Foodweb_.Adjacency</span></code></pre><p>In other terms: models can only be build <em>monotonically</em>.   If you ever feel like you need to &quot;change a component&quot; or &quot;remove a component&quot; from a model, the correct way to do so is to construct a new model from the blueprints and/or the other base models you have kept around.</p><p>Components also <em>require</em> each other: you cannot specify trophic links efficiency in your model without having first specified what trophic links are:</p><pre><code class="language-julia hljs">m = Model(Species(3))
m += Efficiency(4)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr31">ERROR:</span> Component <span class="sgr33">&lt;Efficiency&gt;</span> requires <span class="sgr33">&lt;Foodweb&gt;</span>, neither found in the system nor brought by the blueprints.
<span class="sgr90">in</span> <span class="sgr34">Efficiency_.Flat</span></code></pre><h2 id="Bringing-Blueprints"><a class="docs-heading-anchor" href="#Bringing-Blueprints">Bringing Blueprints</a><a id="Bringing-Blueprints-1"></a><a class="docs-heading-anchor-permalink" href="#Bringing-Blueprints" title="Permalink"></a></h2><p>To help you not hit the above problem too often, some blueprints take advantage of the fact that they contain the information needed to <em>also</em> expand into some of the components they require. Conceptually, they carry the information needed to <em>bring</em> smaller blueprints within them.</p><h3 id="*Imply*"><a class="docs-heading-anchor" href="#*Imply*"><em>Imply</em></a><a id="*Imply*-1"></a><a class="docs-heading-anchor-permalink" href="#*Imply*" title="Permalink"></a></h3><p>For instance, the following blueprint for a foodweb contains enough information to expand into both a <a href="@ref"><code>Foodweb</code></a> component, <em>and</em> the associated <a href="@ref"><code>Species</code></a> component if needed:</p><pre><code class="language-julia hljs">fw = Foodweb([1 =&gt; 2, 2 =&gt; 3]) # Species nodes can be inferred from this blueprint..
m = Model(fw) # .. so a blank model given only this blueprint becomes equiped with the 2 components.</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 2 components:
  - Species: 3 (:s1, :s2, :s3)
  - Foodweb: 2 links, 1 producer, 2 consumers, 2 preys, 1 top.</code></pre><p>As a consequence, it is not an error to expand the <code>Foodweb.Adjacency</code> blueprint into a model not already having a <code>Species</code> compartment. We say that the <code>Foodweb.Adjacency</code> blueprint <em>implies</em> a blueprint for component <code>Species</code>.</p><p>If you need more species in your model than appear in your foodweb blueprint, you can still explicitly provide a larger <code>Species</code> blueprint before you add the foodweb:</p><pre><code class="language-julia hljs">m = Model(Species(5), Foodweb([1 =&gt; 2, 2 =&gt; 3])) # A model with 2 isolated species.</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 2 components:
  - Species: 5 (:s1, :s2, :s3, :s4, :s5)
  - Foodweb: 2 links, 3 producers, 2 consumers, 2 preys, 3 tops.</code></pre><p>In other words, <em>implied</em> blueprints are only expanded if needed.</p><h3 id="*Embed*"><a class="docs-heading-anchor" href="#*Embed*"><em>Embed</em></a><a id="*Embed*-1"></a><a class="docs-heading-anchor-permalink" href="#*Embed*" title="Permalink"></a></h3><p>Some blueprints, on the other hand, explicitly <em>embed</em> other blueprints. For instance, the <a href="@ref"><code>LinearResponse</code></a> embeds both <a href="@ref"><code>ConsumptionRate</code></a> and <a href="@ref"><code>ConsumersPreference</code></a> &quot;sub-blueprints&quot;:</p><pre><code class="language-julia hljs">lin = LinearResponse()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">blueprint for <span class="sgr33">&lt;LinearResponse&gt;</span>: <span class="sgr34">LinearResponse_</span> {
  <span class="sgr36">alpha:</span> <span class="sgr90">&lt;embedded blueprint for</span> <span class="sgr33">&lt;ConsumptionRate&gt;</span>: <span class="sgr34">Flat</span> {
    <span class="sgr36">alpha:</span> 1.0,
  }<span class="sgr90">&gt;</span>,
  <span class="sgr36">w:</span> <span class="sgr90">&lt;embedded blueprint for</span> <span class="sgr33">&lt;ConsumersPreferences&gt;</span>: <span class="sgr34">Homogeneous</span> {}<span class="sgr90">&gt;</span>,
}</code></pre><p>So a model given this single blueprint can expand with 3 additional components.</p><pre><code class="language-julia hljs">m += lin</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 5 components:
  - Species: 5 (:s1, :s2, :s3, :s4, :s5)
  - Foodweb: 2 links, 3 producers, 2 consumers, 2 preys, 3 tops.
  - Consumption rate: [1.0, 1.0, ·, ·, ·]
  - Consumer preferences: 1.0
  - &lt;LinearResponse&gt;</code></pre><p>The difference between <em>embedding</em> and <em>implying</em> is that the <em>embedded</em> sub-blueprints are always expanded. The direct consequence is that they <em>do</em> conflict with existing components:</p><pre><code class="language-julia hljs">m = Model(fw, ConsumptionRate(2)) # This model already has a consumption rate.
m += lin # So it is an error to bring another consumption rate with this blueprint.</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr31">ERROR:</span> Blueprint would expand into component <span class="sgr33">&lt;ConsumptionRate&gt;</span>, which is already in the system.
<span class="sgr90">in</span> <span class="sgr34">ConsumptionRate_.Flat</span>
<span class="sgr90">embedded within:</span> <span class="sgr34">LinearResponse_</span></code></pre><p>This protects you from obtaining a model value with ambiguous consumption rates.</p><p>To prevent the <a href="@ref"><code>ConsumptionRate</code></a> from being brought, you need to explicitly remove it from the blueprint embedding it:</p><pre><code class="language-julia hljs">lin.alpha = nothing # Remove the brought sub-blueprint.
lin = LinearResponse(alpha = nothing) # Or create directly without the embedded blueprint.
m += lin # Consistent model obtained.</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 5 components:
  - Species: 3 (:s1, :s2, :s3)
  - Foodweb: 2 links, 1 producer, 2 consumers, 2 preys, 1 top.
  - Consumption rate: [2.0, 2.0, ·]
  - Consumer preferences: 1.0
  - &lt;LinearResponse&gt;</code></pre><h1 id="Using-the-Default-Model"><a class="docs-heading-anchor" href="#Using-the-Default-Model">Using the Default Model</a><a id="Using-the-Default-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Using-the-Default-Model" title="Permalink"></a></h1><p>Building a model from scratch can be tedious, because numerous components are required for the eventual simulation to take place.</p><p>Here is how you could do it with only temporary blueprints immediately dismissed:</p><pre><code class="language-julia hljs">m = Model(
  Foodweb([:a =&gt; :b, :b =&gt; :c]),
  BodyMass(1),
  MetabolicClass(:all_invertebrates),
  BioenergeticResponse(),
  LogisticGrowth(),
  Metabolism(:Miele2019),
  Mortality(0),
)</code></pre><p>Here is how you could do it with blueprints that you would keep around to later reassemble into other models:</p><pre><code class="language-julia hljs"># Basic blueprints saved into variables for later edition.
fw = Foodweb([:a =&gt; :b, :b =&gt; :c])
bm = BodyMass(1)
mc = MetabolicClass(:all_invertebrates)
be = BioenergeticResponse()
lg = LogisticGrowth()
mb = Metabolism(:Miele2019)
mt = Mortality(0)

# One model with all the associated components.
m = Model() + fw + bm + mc + be + lg + mb + mt</code></pre><p>If this is too tedious, you can use the <a href="../../lib/public/#EcologicalNetworksDynamics.default_model-Tuple{Vararg{Union{EcologicalNetworksDynamics.Framework.Blueprint{&lt;internals&gt;}, EcologicalNetworksDynamics.Framework.BlueprintSum{&lt;internals&gt;}}}}"><code>default_model</code></a> function instead to automatically create a model with all (or most) components required for simulation. The only mandatory argument to <a href="../../lib/public/#EcologicalNetworksDynamics.default_model-Tuple{Vararg{Union{EcologicalNetworksDynamics.Framework.Blueprint{&lt;internals&gt;}, EcologicalNetworksDynamics.Framework.BlueprintSum{&lt;internals&gt;}}}}"><code>default_model</code></a> is a <a href="@ref"><code>Foodweb</code></a> blueprint:</p><pre><code class="language-julia hljs">fw = Foodweb([:a =&gt; :b, :b =&gt; :c])
m = default_model(fw)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 17 components:
  - Species: 3 (:a, :b, :c)
  - Foodweb: 2 links, 1 producer, 2 consumers, 2 preys, 1 top.
  - BodyMass: [100.0, 10.0, 1.0]
  - Metabolic classes: [:invertebrate, :invertebrate, :producer]
  - Growth rate: [·, ·, 1.0]
  - Carrying capacity: [·, ·, 1.0]
  - Producers competition: 1.0
  - &lt;LogisticGrowth&gt;
  - Efficiency: 0.45 to 0.85
  - Maximum consumption: [8.0, 8.0, ·]
  - Hill Exponent: 2.0
  - Consumer preferences: 1.0
  - Intra-specific interference: [·, ·, ·]
  - Half-saturation density: [0.5, 0.5, ·]
  - &lt;BioenergeticResponse&gt;
  - Metabolism: [0.09929551852928711, 0.1765751761097696, 0.0]
  - Mortality: [0.0, 0.0, 0.0]</code></pre><p>But you can feed other blueprints into it to fine-tweak just the parameters you want.</p><pre><code class="language-julia hljs">m = default_model(fw, BodyMass(Z = 1.5), Efficiency(.2))
(m.body_mass, m.efficiency)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">([2.25, 1.5, 1.0], [0.0 0.2 0.0; 0.0 0.0 0.2; 0.0 0.0 0.0])</code></pre><p>The function <a href="../../lib/public/#EcologicalNetworksDynamics.default_model-Tuple{Vararg{Union{EcologicalNetworksDynamics.Framework.Blueprint{&lt;internals&gt;}, EcologicalNetworksDynamics.Framework.BlueprintSum{&lt;internals&gt;}}}}"><code>default_model</code></a> tries hard to figure the default model you expect based on the only few blueprints you input. For instance, it assumes that you need a different type of functional response if you input a <a href="@ref"><code>Temperature</code></a> component, and temperature-dependent allometry rates:</p><pre><code class="language-julia hljs">m = default_model(fw, Temperature(220))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 18 components:
  - Species: 3 (:a, :b, :c)
  - Foodweb: 2 links, 1 producer, 2 consumers, 2 preys, 1 top.
  - Temperature: 220.0K
  - BodyMass: [100.0, 10.0, 1.0]
  - Metabolic classes: [:invertebrate, :invertebrate, :producer]
  - Growth rate: [·, ·, 2.4457111255767084e-12]
  - Carrying capacity: [·, ·, 34342.667662374224]
  - Producers competition: 1.0
  - &lt;LogisticGrowth&gt;
  - Efficiency: 0.45 to 0.85
  - Hill Exponent: 2.0
  - Consumer preferences: 1.0
  - Intra-specific interference: [·, ·, ·]
  - Handling time: 170440.9238100917 to 178473.55707771532
  - Attack rate: 6.894034926202549e-9 to 2.4460958976605684e-8
  - &lt;ClassicResponse&gt;
  - Metabolism: [1.7880778943692315e-12, 3.650786484958455e-12, 0.0]
  - Mortality: [0.0, 0.0, 0.0]</code></pre><p>Or if you wish to explicitly represent <a href="@ref"><code>Nutrients</code></a> as a separate nodes compartment in your ecological network:</p><pre><code class="language-julia hljs">m = default_model(fw, Nutrients.Nodes(2))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Model <span class="sgr90">(alias for EcologicalNetworksDynamics.Framework.System{&lt;internals&gt;})</span> with 20 components:
  - Species: 3 (:a, :b, :c)
  - Foodweb: 2 links, 1 producer, 2 consumers, 2 preys, 1 top.
  - Nutrients: 2 (:n1, :n2)
  - BodyMass: [100.0, 10.0, 1.0]
  - Metabolic classes: [:invertebrate, :invertebrate, :producer]
  - Growth rate: [·, ·, 1.0]
  - Nutrients turnover: [0.25, 0.25]
  - Nutrients supply: [4.0, 4.0]
  - Nutrients concentration: 0.5
  - Nutrients half-saturation: 0.15
  - &lt;NutrientIntake&gt;
  - Efficiency: 0.45 to 0.85
  - Maximum consumption: [8.0, 8.0, ·]
  - Hill Exponent: 2.0
  - Consumer preferences: 1.0
  - Intra-specific interference: [·, ·, ·]
  - Half-saturation density: [0.5, 0.5, ·]
  - &lt;BioenergeticResponse&gt;
  - Metabolism: [0.09929551852928711, 0.1765751761097696, 0.0]
  - Mortality: [0.0, 0.0, 0.0]</code></pre><h2 id="/!\\-Find-fresh-example-snippets-/!\\"><a class="docs-heading-anchor" href="#/!\\-Find-fresh-example-snippets-/!\\">/!\ Find fresh example snippets /!\</a><a id="/!\\-Find-fresh-example-snippets-/!\\-1"></a><a class="docs-heading-anchor-permalink" href="#/!\\-Find-fresh-example-snippets-/!\\" title="Permalink"></a></h2><p>This page of the manual is up-to-date with the latest version of the package, but not the other pages yet.   However, you will already (and always) find up-to-date examples of manipulating models/blueprints/components under the <a href="../../test/user"><code>test/user</code></a> folder. Have a look in there to get familiar with all the package features ;)</p><p>If you were accustomed to a former version of the package, also take a look at our <a href="../../CHANGELOG.md"><code>CHANGELOG.md</code></a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../quickstart/">« Quick Start</a><a class="docs-footer-nextpage" href="../foodwebs/">Generate Food Webs »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.1 on <span class="colophon-date" title="Friday 4 April 2025 09:42">Friday 4 April 2025</span>. Using Julia version 1.11.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
